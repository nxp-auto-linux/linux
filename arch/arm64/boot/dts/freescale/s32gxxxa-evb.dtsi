// SPDX-License-Identifier: GPL-2.0-or-later
/*
 * Copyright 2019-2022 NXP
 */
#include <dt-bindings/gpio/gpio.h>
#include <dt-bindings/pinctrl/s32g-pinctrl.h>

/ {
	chosen {
		stdout-path = "serial0:115200n8";
	};

	usbphynop: usbphynop {
		compatible = "usb-nop-xceiv";
		#phy-cells = <0>;
	};
};

&usbmisc {
	status = "okay";
};

&usbotg {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_usbotg>;
	fsl,usbphy = <&usbphynop>;
	status = "okay";
};

&qspi {
	status = "okay";

	mx25uw51245g@0 {
		#address-cells = <1>;
		#size-cells = <1>;
		compatible = "jedec,spi-nor";
		spi-max-frequency = <200000000>;
		spi-tx-bus-width = <8>;
		spi-rx-bus-width = <8>;
		reg = <0>;
	};
};

&gmac0 {
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_gmac0_rgmii_c>, <&pinctrl_gmac0_mdio_c>;
	phy-handle = <&gmac0_mdio_c_phy4>;
	phy-mode = "rgmii-id";
};

&gmac0_mdio {
	/* AQR107 on S32RGV-VNP-PLAT */
	gmac_mdio_c_phy1: ethernet-phy@1 {
		compatible = "ethernet-phy-ieee802.3-c45";
		reg = <1>;
	};
	/* KSZ9031RNX on S32G-PROCEVB-S/S32G-PROCEVB3-S */
	gmac0_mdio_c_phy4: ethernet-phy@4 {
		reg = <4>;
	};
	/* KSZ9031RNX on S32RGV-VNP-PLAT */
	gmac_mdio_c_phy5: ethernet-phy@5 {
		status = "disabled"; /* blocked by USB by default */
		reg = <5>;
	};
};

&pfe {
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_pfe2_mdio_a>, <&pinctrl_pfe2_rgmii_a>;
};

&pfe_mdio0 {
	/* used by USB ULPI */
	status = "disabled";
};

&pfe_mdio1 {
	/* unused */
	status = "disabled";
};

&pfe_mdio2 {
	/* KSZ9031RNX over SJA1105Q P3 */
	pfe_mdio_a_phy2: ethernet-phy@2 {
		reg = <2>;
	};
	/* KSZ9031RNX over SJA1105Q P4 */
	pfe_mdio_a_phy3: ethernet-phy@3 {
		reg = <3>;
	};

	/* TJA1102 over SJA1105Q P1 */
	pfe_mdio_a_phy6: ethernet-phy@6 {
		#address-cells = <1>;
		#size-cells = <0>;
		reg = <6>;

		/* TJA1102 over SJA1105Q P2 */
		pfe_mdio_a_phy7: ethernet-phy@7 {
			reg = <7>;
		};
	};
};

&pfe_netif1 {
	phy-mode = "sgmii";
	phy-handle = <&gmac_mdio_c_phy1>;
};

&pfe_netif2 {
	phy-mode = "rgmii";
	fixed-link {
		speed = <1000>;
		full-duplex;
	};
};

&generic_timer {
	clock-frequency = <5000000>;
};

&i2c0 {
	pinctrl-names = "default", "gpio";
	pinctrl-0 = <&pinctrl_i2c0>;
	pinctrl-1 = <&pinctrl_i2c0_gpio>;
	scl-gpios = <&gpio 17 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
	sda-gpios = <&gpio 16 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
	status = "okay";
};

&i2c1 {
	pinctrl-names = "default", "gpio";
	pinctrl-0 = <&pinctrl_i2c1>;
	pinctrl-1 = <&pinctrl_i2c1_gpio>;
	scl-gpios = <&gpio 19 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
	sda-gpios = <&gpio 20 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
	status = "okay";
};

&i2c2 {
	pinctrl-names = "default", "gpio";
	pinctrl-0 = <&pinctrl_i2c2>;
	pinctrl-1 = <&pinctrl_i2c2_gpio>;
	scl-gpios = <&gpio 21 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
	sda-gpios = <&gpio 22 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
	status = "okay";
};

&i2c4 {
	pinctrl-names = "default", "gpio";
	pinctrl-0 = <&pinctrl_i2c4>;
	pinctrl-1 = <&pinctrl_i2c4_gpio>;
	scl-gpios = <&gpio 34 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
	sda-gpios = <&gpio 33 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
	status = "okay";
};

&usdhc0 {
	no-1-8-v;
	status = "okay";
};

&can0 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_can0>;
	status = "okay";
};

&can2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_can2>;
	status = "okay";
};

&can3 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_can3>;
	status = "okay";
};

&fccu {
	status = "okay";
};

&swt3 {
	status = "okay";
};

&swt4 {
	status = "okay";
};

&swt5 {
	status = "okay";
};

&swt6 {
	status = "okay";
};

&pit0 {
	status = "okay";
};

&pit1 {
	status = "okay";
};

&pinctrl {
	status = "okay";
	s32g274a-evb {
		pinctrl_can0: can0grp {
			fsl,pins = <
				S32_GEN1_PAD_PC12__CAN0_TXD
				S32_GEN1_PAD_PC11__CAN0_RXD_OUT
				S32_GEN1_PAD_PC11__CAN0_RXD_IN
			>;
		};

		pinctrl_can2: can2grp {
			fsl,pins = <
				S32_GEN1_PAD_PB11__CAN2_TXD
				S32_GEN1_PAD_PB12__CAN2_RXD_OUT
				S32_GEN1_PAD_PB12__CAN2_RXD_IN
			>;
		};

		pinctrl_can3: can3grp {
		       fsl,pins = <
				S32_GEN1_PAD_PB9__CAN3_TXD
				S32_GEN1_PAD_PB10__CAN3_RXD_OUT
				S32_GEN1_PAD_PB10__CAN3_RXD_IN
			   >;
		};

		pinctrl_dspi1: dspi1grp {
			fsl,pins = <
				S32_GEN1_PAD_PA7__SPI1_CS0_OUT
				S32_GEN1_PAD_PA6__SPI1_SOUT_OUT
				S32_GEN1_PAD_PA8__SPI1_SCK_OUT
				S32_GEN1_PAD_PF15__SPI1_SIN_OUT
				S32_GEN1_PAD_PF15__SPI1_SIN_IN
			>;
		};

		pinctrl_dspi1_slave: dspi1slavegrp {
			fsl,pins = <
				S32_GEN1_PAD_PA6__SPI1_SOUT_OUT
				S32_GEN1_PAD_PA7__SPI1_CS0_SLAVE_OUT
				S32_GEN1_PAD_PA7__SPI1_CS0_SLAVE_IN
				S32_GEN1_PAD_PA8__SPI1_SCK_SLAVE_OUT
				S32_GEN1_PAD_PA8__SPI1_SCK_SLAVE_IN
				S32_GEN1_PAD_PF15__SPI1_SIN_OUT
				S32_GEN1_PAD_PF15__SPI1_SIN_IN
			>;
		};

		pinctrl_dspi5: dspi5grp {
			fsl,pins = <
				S32_GEN1_PAD_PA9__SPI5_SCK_OUT
				S32_GEN1_PAD_PA10__SPI5_SIN_OUT
				S32_GEN1_PAD_PA10__SPI5_SIN_IN
				S32_GEN1_PAD_PA11__SPI5_SOUT_OUT
				S32_GEN1_PAD_PA12__SPI5_CS0_OUT
			>;
		};

		pinctrl_i2c0: i2c0grp {
			fsl,pins = <
				S32_GEN1_PAD_PB0__I2C0_DATA_OUT
				S32_GEN1_PAD_PB0__I2C0_DATA_IN
				S32_GEN1_PAD_PB1__I2C0_SCLK_OUT
				S32_GEN1_PAD_PB1__I2C0_SCLK_IN
			>;
		};

		pinctrl_i2c0_gpio: i2c0grp_gpio {
			fsl,pins = <
				S32_GEN1_PAD_PB0__I2C0_DATA_GPIO
				S32_GEN1_PAD_PB0__DISABLED_IN
				S32_GEN1_PAD_PB1__I2C0_SCLK_GPIO
				S32_GEN1_PAD_PB1__DISABLED_IN
			>;
		};

		pinctrl_i2c1: i2c1grp {
			fsl,pins = <
				S32_GEN1_PAD_PB3__I2C1_SCLK_OUT
				S32_GEN1_PAD_PB3__I2C1_SCLK_IN
				S32_GEN1_PAD_PB4__I2C1_DATA_OUT
				S32_GEN1_PAD_PB4__I2C1_DATA_IN
			>;
		};

		pinctrl_i2c1_gpio: i2c1grp_gpio {
			fsl,pins = <
				S32_GEN1_PAD_PB3__I2C1_SCLK_GPIO
				S32_GEN1_PAD_PB3__DISABLED_IN
				S32_GEN1_PAD_PB4__I2C1_DATA_GPIO
				S32_GEN1_PAD_PB4__DISABLED_IN
			>;
		};

		pinctrl_i2c2: i2c2grp {
			fsl,pins = <
				S32_GEN1_PAD_PB5__I2C2_SCLK_OUT
				S32_GEN1_PAD_PB5__I2C2_SCLK_IN
				S32_GEN1_PAD_PB6__I2C2_DATA_OUT
				S32_GEN1_PAD_PB6__I2C2_DATA_IN
			>;
		};

		pinctrl_i2c2_gpio: i2c2grp_gpio {
			fsl,pins = <
				S32_GEN1_PAD_PB5__DISABLED_IN
				S32_GEN1_PAD_PB5__I2C2_SCLK_GPIO
				S32_GEN1_PAD_PB6__DISABLED_IN
				S32_GEN1_PAD_PB6__I2C2_DATA_GPIO
			>;
		};

		pinctrl_i2c4: i2c4grp {
			fsl,pins = <
				S32_GEN1_PAD_PC1__I2C4_DATA_OUT
				S32_GEN1_PAD_PC1__I2C4_DATA_IN
				S32_GEN1_PAD_PC2__I2C4_SCLK_OUT
				S32_GEN1_PAD_PC2__I2C4_SCLK_IN
			>;
		};

		pinctrl_i2c4_gpio: i2c4grp_gpio {
			fsl,pins = <
				S32_GEN1_PAD_PC1__I2C4_DATA_GPIO
				S32_GEN1_PAD_PC1__DISABLED_IN
				S32_GEN1_PAD_PC2__I2C4_SCLK_GPIO
				S32_GEN1_PAD_PC2__DISABLED_IN
			>;
		};

		pinctrl_usbotg: usbotggrp {
		       fsl,pins = <
				S32_GEN1_PAD_PD14__USB_ULPI_DATA_I0_IN
				S32_GEN1_PAD_PD14__USB_ULPI_DATA_O0
				S32_GEN1_PAD_PD15__USB_ULPI_DATA_I1_IN
				S32_GEN1_PAD_PD15__USB_ULPI_DATA_O1
				S32_GEN1_PAD_PE0__USB_ULPI_DATA_I2_IN
				S32_GEN1_PAD_PE0__USB_ULPI_DATA_O2
				S32_GEN1_PAD_PE1__USB_ULPI_DATA_I3_IN
				S32_GEN1_PAD_PE1__USB_ULPI_DATA_O3
				S32_GEN1_PAD_PL12__USB_ULPI_DATA_O4
				S32_GEN1_PAD_PL12__USB_ULPI_DATA_I4_IN
				S32_GEN1_PAD_PL13__USB_ULPI_DATA_O5
				S32_GEN1_PAD_PL13__USB_ULPI_DATA_I5_IN
				S32_GEN1_PAD_PL14__USB_ULPI_DATA_O6
				S32_GEN1_PAD_PL14__USB_ULPI_DATA_I6_IN
				S32_GEN1_PAD_PH0__USB_ULPI_DATA_O7
				S32_GEN1_PAD_PH0__USB_ULPI_DATA_I7_IN
				S32_GEN1_PAD_PL8__USB_ULPI_CLK_OUT
				S32_GEN1_PAD_PL8__USB_ULPI_CLK_IN
				S32_GEN1_PAD_PL9__USB_ULPI_DIR_OUT
				S32_GEN1_PAD_PL9__USB_ULPI_DIR_IN
				S32_GEN1_PAD_PL10__USB_ULPI_STP
				S32_GEN1_PAD_PL11__USB_ULPI_NXT_OUT
				S32_GEN1_PAD_PL11__USB_ULPI_NXT_IN
			   >;
		};

		pinctrl_pfe2_mdio_a: pfe2mdioagrp {
			fsl,pins = <
				S32_G274_PAD_PF2__PFE2_MDC
				S32_G274_PAD_PE15__PFE2_MDIO_OUT
				S32_G274_PAD_PE15__PFE2_MDIO_IN
			>;
		};

		pinctrl_pfe2_rgmii_a: pfe2rgmiiagrp {
			fsl,pins = <
				S32_G274_PAD_PJ0__PFE2_TX_D0_OUT
				S32_G274_PAD_PH1__PFE2_TX_D1_OUT
				S32_G274_PAD_PH2__PFE2_TX_D2_OUT
				S32_G274_PAD_PH3__PFE2_TX_D3_OUT
				S32_G274_PAD_PH4__PFE2_RXCLK_OUT
				S32_G274_PAD_PH4__PFE2_RXCLK_IN
				S32_G274_PAD_PH5__PFE2_RX_DV_OUT
				S32_G274_PAD_PH5__PFE2_RX_DV_IN
				S32_G274_PAD_PH6__PFE2_RX_D0_OUT
				S32_G274_PAD_PH6__PFE2_RX_D0_IN
				S32_G274_PAD_PH7__PFE2_RX_D1_OUT
				S32_G274_PAD_PH7__PFE2_RX_D1_IN
				S32_G274_PAD_PH8__PFE2_RX_D2_OUT
				S32_G274_PAD_PH8__PFE2_RX_D2_IN
				S32_G274_PAD_PH9__PFE2_RX_D3_OUT
				S32_G274_PAD_PH9__PFE2_RX_D3_IN
				S32_G274_PAD_PH10__PFE2_TXCLK_OUT
				S32_G274_PAD_PH10__PFE2_TXCLK_IN
				S32_G274_PAD_PE14__PFE2_TX_EN_OUT
			>;
		};

		pinctrl_gmac0_mdio_c: gmac0mdiocgrp {
			fsl,pins = <
				S32_GEN1_PAD_PD12__GMAC0_MDC
				S32_GEN1_PAD_PD13__GMAC0_MDIO_OUT
				S32_GEN1_PAD_PD13__GMAC0_MDIO_IN
			>;
		};

		pinctrl_gmac0_rgmii_c: gmac0rgmiicgrp {
			fsl,pins = <
				S32_GEN1_PAD_PE2__GMAC0_TXCLK_OUT
				S32_GEN1_PAD_PE2__GMAC0_TXCLK_IN
				S32_GEN1_PAD_PE3__GMAC0_TX_EN_OUT
				S32_GEN1_PAD_PE4__GMAC0_TX_D0_OUT
				S32_GEN1_PAD_PE5__GMAC0_TX_D1_OUT
				S32_GEN1_PAD_PE6__GMAC0_TX_D2_OUT
				S32_GEN1_PAD_PE7__GMAC0_TX_D3_OUT
				S32_GEN1_PAD_PE8__GMAC0_RXCLK_OUT
				S32_GEN1_PAD_PE8__GMAC0_RXCLK_IN
				S32_GEN1_PAD_PE9__GMAC0_RX_DV_OUT
				S32_GEN1_PAD_PE9__GMAC0_RX_DV_IN
				S32_GEN1_PAD_PE10__GMAC0_RX_D0_OUT
				S32_GEN1_PAD_PE10__GMAC0_RX_D0_IN
				S32_GEN1_PAD_PE11__GMAC0_RX_D1_OUT
				S32_GEN1_PAD_PE11__GMAC0_RX_D1_IN
				S32_GEN1_PAD_PE12__GMAC0_RX_D2_OUT
				S32_GEN1_PAD_PE12__GMAC0_RX_D2_IN
				S32_GEN1_PAD_PE13__GMAC0_RX_D3_OUT
				S32_GEN1_PAD_PE13__GMAC0_RX_D3_IN
			>;
		};

		pinctrl_pfe1_mdio_c: pfe1mdiocgrp {
			fsl,pins = <
				S32_G274_PAD_PD12__PFE1_MDC
				S32_G274_PAD_PD13__PFE1_MDIO_OUT
				S32_G274_PAD_PD13__PFE1_MDIO_IN
			>;
		};

		pinctrl_pfe1_rgmii_c: pfe1rgmiicgrp {
			fsl,pins = <
				S32_G274_PAD_PE2__PFE1_TXCLK_OUT
				S32_G274_PAD_PE2__PFE1_TXCLK_IN
				S32_G274_PAD_PE3__PFE1_TX_EN_OUT
				S32_G274_PAD_PE4__PFE1_TX_D0_OUT
				S32_G274_PAD_PE5__PFE1_TX_D1_OUT
				S32_G274_PAD_PE6__PFE1_TX_D2_OUT
				S32_G274_PAD_PE7__PFE1_TX_D3_OUT
				S32_G274_PAD_PE8__PFE1_RXCLK_OUT
				S32_G274_PAD_PE8__PFE1_RXCLK_IN
				S32_G274_PAD_PE9__PFE1_RX_DV_OUT
				S32_G274_PAD_PE9__PFE1_RX_DV_IN
				S32_G274_PAD_PE10__PFE1_RX_D0_OUT
				S32_G274_PAD_PE10__PFE1_RX_D0_IN
				S32_G274_PAD_PE11__PFE1_RX_D1_OUT
				S32_G274_PAD_PE11__PFE1_RX_D1_IN
				S32_G274_PAD_PE12__PFE1_RX_D2_OUT
				S32_G274_PAD_PE12__PFE1_RX_D2_IN
				S32_G274_PAD_PE13__PFE1_RX_D3_OUT
				S32_G274_PAD_PE13__PFE1_RX_D3_IN
			>;
		};

		pinctrl_ftm0: ftm0grp {
			fsl,pins = <
				S32_GEN1_PAD_PB_02__FTM0_CH2_I
				S32_GEN1_PAD_PB_02__FTM0_CH2_O
				S32_GEN1_PAD_PL_01__FTM0_CH1_O
				S32_GEN1_PAD_PL_01__FTM0_CH1_I
				S32_GEN1_PAD_PL_04__FTM0_CH3_O
				S32_GEN1_PAD_PL_04__FTM0_CH3_I
				S32_GEN1_PAD_PL_05__FTM0_CH4_O
				S32_GEN1_PAD_PL_05__FTM0_CH4_I
			>;
		};

		pinctrl_ftm1: ftm1grp {
			fsl,pins = <
				S32_GEN1_PAD_PB_13__FTM1_CH2_O
				S32_GEN1_PAD_PB_13__FTM1_CH2_I
				S32_GEN1_PAD_PB_14__FTM1_CH3_I
				S32_GEN1_PAD_PB_15__FTM1_CH3_O
				S32_GEN1_PAD_PC_00__FTM1_CH4_O
				S32_GEN1_PAD_PC_00__FTM1_CH4_I
			>;
		};

		pinctrl_rgmii_a: gmacrgmiiagrp {
			fsl,pins = <
				S32_GEN1_PAD_PH1__SIUL_GPIO113
				S32_GEN1_PAD_PH2__SIUL_GPIO114
				S32_GEN1_PAD_PH3__SIUL_GPIO115
				S32_GEN1_PAD_PH4__SIUL_GPIO116
				S32_GEN1_PAD_PH5__SIUL_GPIO117
				S32_GEN1_PAD_PH6__SIUL_GPIO118
				S32_GEN1_PAD_PH7__SIUL_GPIO119
				S32_GEN1_PAD_PH8__SIUL_GPIO120
				S32_GEN1_PAD_PH9__SIUL_GPIO121
				S32_GEN1_PAD_PH10__SIUL_GPIO122
				S32_GEN1_PAD_PJ0__SIUL_GPIO144
			>;
		};
	};
};

&edma0 {
	status = "okay";
};

&edma1 {
	status = "okay";
};

&spi1 {
	pinctrl-0 = <&pinctrl_dspi1>;
	pinctrl-1 = <&pinctrl_dspi1_slave>;
	pinctrl-names = "default", "slave";
	#address-cells = <1>;
	#size-cells = <0>;
	status = "okay";

	spidev0: spidev@0 {
		compatible = "rohm,dh2228fv";
		spi-max-frequency = <4000000>;
		reg = <0>;
		fsl,spi-cs-sck-delay = <100>;
		fsl,spi-sck-cs-delay = <100>;
	};
};

&spi5 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_dspi5>;
	#address-cells = <1>;
	#size-cells = <0>;
	status = "okay";

	ethernet-switch@0 {
		compatible = "nxp,sja1105q";
		spi-max-frequency = <0x3D0900>;
		spi-cpha;
		fsl,spi-cs-sck-delay = <100>;
		fsl,spi-sck-cs-delay = <100>;
		reg = <0>;

		dsa,member = < 0 0 >;

		ports {
			#address-cells = <1>;
			#size-cells = <0>;

			port@0 {
				label = "sw0-p0";
				phy-mode = "rgmii-id";
				ethernet = <&pfe_netif2>;
				reg = <0>;

				fixed-link {
					speed = <1000>;
					full-duplex;
				};
			};

			enet_p1@1 {
				label = "enet_p1";
				phy-mode = "mii";
				phy-handle = <&pfe_mdio_a_phy6>;
				reg = <1>;
			};

			enet_p2@2 {
				label = "enet_p2";
				phy-mode = "mii";
				phy-handle = <&pfe_mdio_a_phy7>;
				reg = <2>;
			};

			enet_p3@3 {
				label = "enet_p3";
				phy-mode = "rgmii-id";
				phy-handle = <&pfe_mdio_a_phy2>;
				reg = <3>;
			};

			enet_p4@4 {
				label = "enet_p4";
				phy-mode = "rgmii-id";
				phy-handle = <&pfe_mdio_a_phy3>;
				reg = <4>;
			};
		};
	};
};

&pcie0 {
	status = "okay";
};

&pcie1 {
	status = "okay";
};

&llce_dte_sram {
	status = "okay";
};

&llce_ppe_rx_sram {
	status = "okay";
};

&llce_ppe_tx_sram {
	status = "okay";
};

&llce_frpe_sram {
	status = "okay";
};

&llce_shmem {
	status = "okay";
};

&llce_boot_status {
	status = "okay";
};

&llce_can1 {
	status = "okay";
};

&llce_can2 {
	status = "okay";
};

&llce_can3 {
	status = "okay";
};

&llce_can4 {
	status = "okay";
};

&llce_can5 {
	status = "okay";
};

&llce_can6 {
	status = "okay";
};

&llce_can7 {
	status = "okay";
};

&llce_can8 {
	status = "okay";
};

&llce_can9 {
	status = "okay";
};

&llce_can10 {
	status = "okay";
};

&llce_can11 {
	status = "okay";
};

&llce_can12 {
	status = "okay";
};

&llce_can13 {
	status = "okay";
};

&llce_can14 {
	status = "okay";
};

&llce_can15 {
	status = "okay";
};

&pwm0 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_ftm0>;
	status = "okay";
};

&pwm1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_ftm1>;
	status = "okay";
};

