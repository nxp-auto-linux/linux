# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/serial/fsl,s32v234-shm.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: S32V234 Shared Memory Block

maintainers:
  - Ionut Vicovan <ionut.vicovan@nxp.com>

description: |
  - This is a shared memory block to be used by various S32V234 generic devices,
    which require a dedicated contiguous memory block to be reserved
    in the kernel memory space.
    It must reside inside the 'reserved-memory' section of the device tree.
    Device is matched via its bus drivers, and has a number of properties
    that apply to the generic device (independent from the bus).
    It may be used by more than one device at once, as long as each one follows
    a proper synchronization mechanism for accessing the data.

allOf:
  - $ref: "rs485.yaml"

properties:
  compatible:
    oneOf:
      - enum:
          - fsl,s32v234-shm

  reg:
    maxItems: 1

rs485-rts-active-low: true
linux,rs485-enabled-at-boot-time: true

required:
  - compatible
  - reg

unevaluatedProperties: false

examples:
  - |
    reserved-memory {
       ....
       /* 1Mb shared memory */
       shared_memory: shm@0xC1000000 {
                    compatible = "fsl,s32v234-shm";
                    reg = <0x0 0xC1000000 0x0 0x100000>;    /* 1 MB */
                    no-map;
       };
    };

    ....

    some-device {
       ....
       memory-region = <&shared_memory>;
    };
